/**********************************************************************
 * main.js
 *********************************************************************/// global landingpage object
var avmlp={debug:!0,defaultHeight:960,defaultWidth:1200,zoom:1,sectionNames:["start","innenleben","wlan","usb3","telefonie","fritzos","auszeichnungen"],currentSectionIndex:0,$slides:null,$viewport:null,aniStart:1200,aniStep:1,aniTargetStep:1,aniImages:[],aniTotalImages:250,initAnimationImages:function(){for(var e=0;e<this.aniTotalImages;e++){this.aniImages[e]=new Image;this.aniImages[e].src="./frames/400px/comp_"+this.pad(e,4)+".png"}},initInsideView:function(){$("#detailed-view").beforeAfter({animateIntro:!0,introDelay:2e3,introDuration:300,showFullLinks:!1})},resizeSections:function(){var e=jQuery("html").height(),t=jQuery("html").width();jQuery("section").css("height",e+"px");var n=this.zoom;e<this.defaultHeight?this.zoom=e/this.defaultHeight:this.zoom=1;t<this.defaultWidth&&t/this.defaultHeight<this.zoom&&(this.zoom=t/this.defaultHeight);n!==this.zoom&&this.applyZoom();if(this.debug){jQuery("#debug-section-height").text(e+"px");jQuery("#debug-zoom").text(this.zoom.toPrecision(3))}},applyZoom:function(){var e=-(this.defaultHeight-this.defaultHeight*this.zoom)/2;jQuery("section .slide, #viewport").css({"-webkit-transform":"scale("+this.zoom+", "+this.zoom+")","-ms-transform":"scale("+this.zoom+", "+this.zoom+")",transform:"scale("+this.zoom+", "+this.zoom+")",top:e+"px"})},setNavigationState:function(){var e=Math.floor($(window).scrollTop()/(this.defaultHeight*this.zoom));e<0&&(e=0);e>=avmlp.sectionNames.length&&(e=avmlp.sectionNames.length-1);if(e===this.currentSectionIndex)return;this.currentSectionIndex=e;this.setViewportContent();var t=this.sectionNames[e];if(!$("#primary ."+t).hasClass("active")){$("#primary li").removeClass("active");$("#primary ."+t).addClass("active")}},initViewPort:function(){this.$slides=$(".slide").clone();this.$viewport=$("#viewport");this.setViewportContent();this.$viewport.show();$(".slide").hide()},setViewportContent:function(){var e=$(this.$slides[this.currentSectionIndex]);this.$viewport.find("header").html(e.find("header").html());this.$viewport.find("#packshot").attr("src",e.find(".packshot").attr("src"));this.$viewport.find("p").html(e.find("p").html());if(this.currentSectionIndex===0){this.$viewport.find(".logo-fritz-color").show();this.$viewport.find(".logo-fritz").hide()}else{this.$viewport.find(".logo-fritz-color").hide();this.$viewport.find(".logo-fritz").show()}this.debug&&jQuery("#debug-section-index").text(this.currentSectionIndex)},changeFrame:function(){this.aniImages.length>0&&this.aniImages[this.aniStep]&&this.aniImages[this.aniStep].complete&&$("#packshot").attr("src")!==this.aniImages[this.aniStep].src&&$("#packshot").attr("src",this.aniImages[this.aniStep].src)},pad:function(e,t){var n=""+e;while(n.length<t)n="0"+n;return n}};jQuery(document).ready(function(e){e("#debug-bar").length?e("#debug-bar").on("click",function(t){t.preventDefault();e("#debug-bar").remove();avmlp.debug=!1}):avmlp.debug=!1;avmlp.resizeSections();avmlp.initViewPort();avmlp.setNavigationState();avmlp.initAnimationImages();avmlp.initInsideView()});jQuery(window).on("resize",function(){avmlp.resizeSections()});var requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();(function e(){requestAnimFrame(e);avmlp.setNavigationState();var t=$(window).scrollTop();if(t>avmlp.aniStart*avmlp.zoom){avmlp.aniTargetStep=Math.ceil((t-avmlp.aniStart*avmlp.zoom)/12);avmlp.aniTargetStep!==avmlp.aniStep&&(avmlp.aniStep+=Math.ceil((avmlp.aniTargetStep-avmlp.aniStep)/5));avmlp.changeFrame()}avmlp.debug&&$("#debug-scroll-top").text(t+"px")})();